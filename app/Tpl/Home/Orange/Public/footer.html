<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="__PUBLIC__/jquery/jquery-1.11.0.min.js"></script>
<script src="__PUBLIC__/bootstrap/bootstrap.min.js"></script>
<script src="__PUBLIC__/bootstrap-switch/bootstrap-switch.min.js"></script>
<script src="__PUBLIC__/jquery.ui/jquery-ui-1.10.3.custom.min.js"></script>
</body>
</html>
<script>
  $(function(){
    /**头部导航切换**/
    $("#topMenu").find("li").click(function(){
      $(this).addClass("active")
      var menu = $(this).find("a").attr("href");
      $(menu).removeClass("hidden").addClass("show");
      $(menu).siblings("ul").removeClass("show").addClass("hidden");
      $(this).siblings("li").removeClass("active");
    });

    /** set the defalut nav**/
    $("nav-sidebar").collapse();
    /** default show the first nav **/
    $("li.link:first").parents("li").addClass("active");
    $("li.link:first").parents("ul").collapse("show");
    var url = $("li.link:first").data("href");
    $(".main").load(url);

    /** ajax load the main content **/
    $(".link").click(function(){
      $(this).parents("li").addClass("active");
      $(this).parent("ul").collapse("show");
      $(this).parents("li").siblings("li").removeClass("active");
      $(this).parents("li").siblings("li").find("ul").collapse("hide");
      var url = $(this).data('href');
      $(".main").load(url);
      });
  })

/** load main content **/
function loadMain(url){
  $(".main").load(url);
}

/** post to the server **/
function editInfo(form){
  var selForm = $("#"+form);
  var url = selForm.data('href');
  $.post(url, selForm.serialize(), function(data){
    calert(data.msg, data.code);}, 'json');
  return false;
}

/** alert function **/
function calert(msg, status){
  switch (status){
  case '0':
    var status_name = 'alert-danger';
    break;
  case '1':
    var status_name = 'alert-success';
    break;
  }
  html = '<div class="alert '+status_name+'">'+msg+'<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button></div>'
  $(".main").prepend(html);
  window.setTimeout(function(){$(".alert").alert('close');}, 1500);
}
</script>
