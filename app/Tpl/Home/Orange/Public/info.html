<!--
  标题:title
-->
<h1 class="page-header">{$title}</h2>

<!-- 面包屑导航 -->
<notempty name="bread_list">
<include file="Public:breadcrumbs" />
</notempty>

  <!--
    链接：url
    字段列表：file_list
        {title, type, name}
    值列表：info
  -->
  <form role="form" id="form" onsubmit="return editInfo('form')" data-href="{$form_url}" enctype="multipart/form-data">
    <volist name="field_list" id="vo">

    <!-- 内容字段 -->
    <if condition="$vo.type eq 'textarea'">
    <div class="form-group">
        <label for="{$vo.name}">{$vo.title}</label>
        <textarea class="form-control" id="{$vo.name}" name="{$vo.name}" cols="80" rows="4">{$field_info[$vo[name]]}</textarea>
    </div>

    <!-- 富文本编辑器 -->
    <elseif condition="$vo.type eq 'content'" />
    <div class="form-group">
    <label for="{$vo.name}">{$vo.title}</label>
    <include file="Public:editor" />
        <div class="form-control" id="editor" style="overflow:scroll;height:300px;">{$field_info[$vo[name]]}</div>
        <textarea class="hidden" id="resultInfo" name="{$vo.name}"></textarea>
    </div>

    <!-- 选择字段 -->
    <elseif condition="$vo.type eq 'select'" />
    <div class="form-group">
        <label for="{$vo.name}">{$vo.title}</label>
        <select class="form-control" id="{$vo.name}" name="{$vo.name}">
            <volist name="vo.data" id="voo">
            <option value="{$voo.value}" <eq name="field_info[$vo[name]]" value="$voo.value">selected</eq>>{$voo.title}</option>
            </volist>
        </select>
    </div>

    <!-- 单选字段 -->
    <elseif condition="$vo.type eq 'radio'" />
    <div class="form-group">
        <volist name="vo.data" id="voo">
        <label class="radio-inline">
            <input type="radio" name="{$vo.name}" id="{$vo.name}{$key+1}" value="{$voo.value}"
            <eq name="field_info[$vo[name]]" value="$voo.value">checked</eq>>{$voo.title}
        </label>
            </volist>
    </div>

    <!-- 多选 -->
    <!-- 图片路径 -->
    <elseif condition="$vo.type eq 'path'" />
    <div class="form-group">
      <label for="{$vo.name}">{$vo.title}</label>
      <notempty name="field_info[$vo[name]]">
        <img class="img_responsive" src="{$field_info[$vo[name]]|getPicPath=###,'s'}" height="50px" />
      </notempty>
      <input class="form-control" id="imgPath" name="{$vo.name}" type="file" value="{$field_info[$vo[name]]}" accept:"image/*">
    </div>

    <!-- 图片字段 -->
    <elseif condition="$vo.type eq 'sel_img'" />
    <div class="form-group">
        <label for="{$vo.name}">{$vo.title}</label>
        <a class="btn btn-default" id="sel_img">点击选择图片</a>
        <img class="img_responsive " id="resultImg" <empty name="field_info[$vo[name]]"> class="hidden"</empty> src="<php>echo getPicPath(D('GalleryMeta')->getImg($field_info[$vo['name']]));</php>" height="50px" />
        <input type="hidden" name="{$vo.name}" id="resultImgId"  value="{$field_info[$vo[name]]}">
    </div>


    <!-- 隐藏字段 -->
    <elseif condition="$vo.type eq 'hidden'"/>
    <input type="hidden" name="{$vo.name}" value="{$field_info[$vo[name]]}">

    <!-- 不可修改 -->
    <elseif condition="$vo.type eq 'disabled'"/>
    <div class="form-group">
        <label for="{$vo.name}">{$vo.title}</label>
        <input class="form-control" id="{$vo.name}" name="{$vo.name}" type="text" value="{$field_info[$vo[name]]}" disabled>
    </div>

    <!-- 自定义字段 -->
    <elseif condition="$vo.type eq 'ext_info'" />
    <volist name="" id="voo">
      <div class="form-group">
        <label for=""></label>
        <input class="form-control" id="" name="" type="text" value="">
      </div>
    </volist>

    <!-- 子文章属性 -->
    <elseif condition="$vo.type eq 'ext_list'" />
    <div class="panel-group" id="accordion">
        <div class="panel panel-default" style="margin-bottom:20px;">
            <div class="panel-heading">
                <h4 class="panel-title">
                    <a data-toggle="collapse" data-toggle="collapse" data-parent="#accordion" href="#ext_list_table">{$vo.title}</a>
                </h4>
            </div>
        <div id="ext_list_table"  class="panel-collapse collapse in">
            <div class="panel-body" id="ext_list">
            </div>
        </div>
    </div>


    <!-- 普通文本 -->
    <else />
    <div class="form-group">
        <label for="{$vo.name}">{$vo.title}</label>
        <input class="form-control" id="{$vo.name}" name="{$vo.name}" type="{$vo.type}" value="{$field_info[$vo[name]]}">
    </div>
    </if>


    </volist>
    <button type="submit" class="btn btn-primary">更新</button>
    <!--button class="btn btn-default" onclick="loadMain('{$return_url}')" >取消</button-->
  </form>

<!--
  插件列表：plugin_list
-->
<include file="Public:gallery" />
<script src="__PUBLIC__/js/editor.js"></script>
<script>
$(function(){
  var url = '{$ext_url}';
  $("#ext_list").load(url);
})
</script>
