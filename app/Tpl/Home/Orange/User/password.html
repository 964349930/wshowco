<include file="Public:header" />
<include file="Public:nav" />
<h2 class="page-header">更改密码</h2>
<form role="form" id="form" onsubmit="return edit()">
    <div class="form-group">
        <label for="oldpassword">原始密码</label>
        <input type="password" class="form-control" id="oldpassword" name="oldpassword">
    </div>
    <div class="form-group">
        <label for="newpassword">新密码</label>
        <input type="password" class="form-control" id="newpassword" name="newpassword">
    </div>
    <div class="form-group">
        <label for="repassword">确认密码</label>
        <input type="password" class="form-control" id="repassword" name="repassword">
    </div>
    <button type="submit" class="btn btn-primary">更新</button>
</form>
<include file="Public:footer" />
<script>
function edit(){
    if($("#oldpassword").val() == ''){
        alert('alert-danger', '原始密码不能为空');
    }else if($("#newpassword").val() == ''){
        alert('alert-danger', '新密码不能为空');
    }else if($("#newpassword").val().length < 6){
        alert('alert-danger', '新密码少于6位');
    }else if($("#repassword").val() == ''){
        alert('alert-danger', '确认密码不能为空');
    }else if($("#newpassword").val() != $("#repassword").val()){
        alert('alert-danger', '两次输入的密码不一致');
    }else{
        $.post('{:U("Home/User/password")}',
                $("#form").serialize(),
                function(data){
                alert(data.status, data.msg);
                },
                'json'
                );
    }
    return false;
}
</script>
