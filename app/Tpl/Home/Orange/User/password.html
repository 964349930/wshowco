<h2 class="page-header">更改密码</h2>
<form role="form" id="form" onsubmit="return edit()">
    <div class="form-group">
        <label for="oldpassword">原始密码</label>
        <input type="password" class="form-control" id="oldpassword" name="oldpassword">
    </div>
    <div class="form-group">
        <label for="newpassword">新密码</label>
        <input type="password" class="form-control" id="newpassword" name="newpassword">
    </div>
    <div class="form-group">
        <label for="repassword">确认密码</label>
        <input type="password" class="form-control" id="repassword" name="repassword">
    </div>
    <button type="submit" class="btn btn-primary">更新</button>
</form>
<script>
function edit(){
    if($("#oldpassword").val() == ''){
        calert('原始密码不能为空', '0');
    }else if($("#newpassword").val() == ''){
        calert('新密码不能为空', '0');
    }else if($("#newpassword").val().length < 6){
        calert('新密码少于6位', '0');
    }else if($("#repassword").val() == ''){
        calert('确认密码不能为空', '0');
    }else if($("#newpassword").val() != $("#repassword").val()){
        calert('两次输入的密码不一致', '0');
    }else{
        $.post('{:U("Home/User/password")}',
                $("#form").serialize(),
                function(data){
                    calert(data.msg, data.status);
                },
                'json'
                );
    }
    return false;
}
</script>
